(function(b){if(!b.browser){b.browser={};b.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());b.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());b.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());b.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())}var a={destroy:function(){var c=b(this);c.unbind(".maskMoney");if(b.browser.msie){this.onpaste=null}return this},mask:function(){return this.trigger("mask")},init:function(c){c=b.extend({symbol:"",symbolStay:false,thousands:",",decimal:".",precision:2,defaultZero:true,allowZero:false,allowNegative:false},c);return this.each(function(){var n=b(this);var i=false;function j(){i=true}function g(){i=false}function q(C){C=C||window.event;var w=C.which||C.charCode||C.keyCode;if(w==undefined){return false}if(w<48||w>57){if(w==45){j();n.val(m(n));return false}else{if(w==43){j();n.val(n.val().replace("-",""));return false}else{if(w==13||w==9){if(i){g();b(this).change()}return true}else{if(b.browser.mozilla&&(w==37||w==39)&&C.charCode==0){return true}else{k(C);return true}}}}}else{if(e(n)){return false}else{k(C);var A=String.fromCharCode(w);var v=n.get(0);var B=t(v);var z=B.start;var y=B.end;v.value=v.value.substring(0,z)+A+v.value.substring(y,v.value.length);h(v,z+1);j();return false}}}function e(w){var z=(w.val().length>=w.attr("maxlength")&&w.attr("maxlength")>=0);var x=t(w.get(0));var A=x.start;var v=x.end;var y=(x.start!=x.end&&w.val().substring(A,v).match(/\d/))?true:false;return z&&!y}function f(B){B=B||window.event;var w=B.which||B.charCode||B.keyCode;if(w==undefined){return false}var v=n.get(0);var A=t(v);var z=A.start;var y=A.end;if(w==8){k(B);if(z==y){v.value=v.value.substring(0,z-1)+v.value.substring(y,v.value.length);z=z-1}else{v.value=v.value.substring(0,z)+v.value.substring(y,v.value.length)}h(v,z);j();return false}else{if(w==9){if(i){b(this).change();g()}return true}else{if(w==46||w==63272){k(B);if(v.selectionStart==v.selectionEnd){v.value=v.value.substring(0,z)+v.value.substring(y+1,v.value.length)}else{v.value=v.value.substring(0,z)+v.value.substring(y,v.value.length)}h(v,z);j();return false}else{return true}}}}function d(x){var v=u();if(n.val()==v){n.val("")}else{if(n.val()==""&&c.defaultZero){n.val(l(v))}else{n.val(l(n.val()))}}if(this.createTextRange){var w=this.createTextRange();w.collapse(false);w.select()}}function o(v){if(b.browser.msie){q(v)}if(n.val()==""||n.val()==l(u())||n.val()==c.symbol){if(!c.allowZero){n.val("")}else{if(!c.symbolStay){n.val(u())}else{n.val(l(u()))}}}else{if(!c.symbolStay){n.val(n.val().replace(c.symbol,""))}else{if(c.symbolStay&&n.val()==c.symbol){n.val(l(u()))}}}}function k(v){if(v.preventDefault){v.preventDefault()}else{v.returnValue=false}}function h(v,y){var w=n.val().length;n.val(p(v.value));var z=n.val().length;y=y-(w-z);s(n,y)}function r(){var v=n.val();n.val(p(v))}function p(E){E=E.replace(c.symbol,"");var w="0123456789";var B=E.length;var D="",F="",z="";if(B!=0&&E.charAt(0)=="-"){E=E.replace("-","");if(c.allowNegative){z="-"}}if(B==0){if(!c.defaultZero){return F}F="0.00"}for(var A=0;A<B;A++){if((E.charAt(A)!="0")&&(E.charAt(A)!=c.decimal)){break}}for(;A<B;A++){if(w.indexOf(E.charAt(A))!=-1){D+=E.charAt(A)}}var y=parseFloat(D);y=isNaN(y)?0:y/Math.pow(10,c.precision);F=y.toFixed(c.precision);A=c.precision==0?0:1;var x,C=(F=F.split("."))[A].substr(0,c.precision);for(x=(F=F[0]).length;(x-=3)>=1;){F=F.substr(0,x)+c.thousands+F.substr(x)}return(c.precision>0)?l(z+F+c.decimal+C+Array((c.precision+1)-C.length).join(0)):l(z+F)}function u(){var v=parseFloat("0")/Math.pow(10,c.precision);return(v.toFixed(c.precision)).replace(new RegExp("\\.","g"),c.decimal)}function l(w){if(c.symbol!=""){var v="";if(w.length!=0&&w.charAt(0)=="-"){w=w.replace("-","");v="-"}if(w.substr(0,c.symbol.length)!=c.symbol){w=v+c.symbol+w}}return w}function m(w){var v=w.val();if(c.allowNegative){if(v!=""&&v.charAt(0)=="-"){return v.replace("-","")}else{return"-"+v}}else{return v}}function s(v,w){b(v).each(function(y,z){if(z.setSelectionRange){z.focus();z.setSelectionRange(w,w)}else{if(z.createTextRange){var x=z.createTextRange();x.collapse(true);x.moveEnd("character",w);x.moveStart("character",w);x.select()}}});return this}function t(z){var C=0,x=0,B,y,w,v,A;if(typeof z.selectionStart=="number"&&typeof z.selectionEnd=="number"){C=z.selectionStart;x=z.selectionEnd}else{y=document.selection.createRange();if(y&&y.parentElement()==z){v=z.value.length;B=z.value.replace(/\r\n/g,"\n");w=z.createTextRange();w.moveToBookmark(y.getBookmark());A=z.createTextRange();A.collapse(false);if(w.compareEndPoints("StartToEnd",A)>-1){C=x=v}else{C=-w.moveStart("character",-v);C+=B.slice(0,C).split("\n").length-1;if(w.compareEndPoints("EndToEnd",A)>-1){x=v}else{x=-w.moveEnd("character",-v);x+=B.slice(0,x).split("\n").length-1}}}}return{start:C,end:x}}if(!n.attr("readonly")){n.unbind(".maskMoney");n.bind("keypress.maskMoney",q);n.bind("keydown.maskMoney",f);n.bind("blur.maskMoney",o);n.bind("focus.maskMoney",d);n.bind("mask.maskMoney",r)}})}};b.fn.maskMoney=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.maskMoney")}}}})(jQuery);